<h1 class="text-center">TASK LIST</h1>
<br>

<!-- Add Task -->
<div class="text-center mb-3">
  <input [(ngModel)]="newTask" placeholder="Enter new task" class="form-control d-inline w-50">
  <button class="btn btn-primary ms-2" (click)="addTask()">Add</button>
</div>

<!-- Filter Buttons -->
<div class="task-controls text-center mb-3">
  <button class="btn btn-outline-primary me-2"
          (click)="setFilter('all')"
          [class.active]="currentFilter === 'all'">All</button>
  <button class="btn btn-outline-primary me-2"
          (click)="setFilter('active')"
          [class.active]="currentFilter === 'active'">Active</button>
  <button class="btn btn-outline-primary"
          (click)="setFilter('completed')"
          [class.active]="currentFilter === 'completed'">Completed</button>
</div>

<!-- Task Table -->
<table class="table table-bordered text-center" *ngIf="tasks.length > 0">
  <thead>
    <tr>
      <th>ID</th>
      <th>Task</th>
      <th>Completed</th>
      <th>Status</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let task of tasks; let i = index">
      <td>{{ task.id }}</td>
      <td [ngClass]="{ 'completed': task.completed }">{{ task.text }}</td>
      <td>
        <input type="checkbox" [checked]="task.completed" (change)="toggleTaskCompletion(i)">
      </td>
      <td>
        <span *ngIf="task.completed" class="badge bg-success">Completed</span>
        <span *ngIf="!task.completed" class="badge bg-warning text-dark">Active</span>
      </td>
      <td>
        <button class="btn btn-danger btn-sm" (click)="deleteTask(i)">Delete</button>
      </td>
    </tr>
  </tbody>
</table>

<!-- Totals -->
<div class="mt-3 text-center">
  <p><strong>Total Tasks:</strong> {{ getTotalTasks() }}</p>
  <p><strong>Completed Tasks:</strong> {{ getTotalCompletedTasks() }}</p>
  <p><strong>Active Tasks:</strong> {{ getTotalTasks() - getTotalCompletedTasks() }}</p>
</div>

<!-- Completed Task Details -->
<div class="mt-3" *ngIf="getTotalCompletedTasks() > 0">
  <h4>Completed Task Details</h4>
  <table class="table table-bordered text-center">
    <thead>
      <tr>
        <th>ID</th>
        <th>Task</th>
      </tr>
    </thead>
    <tbody>
     <ng-container *ngFor="let task of tasks">
        <tr *ngIf="task.completed">
          <td>{{ task.id }}</td>
          <td>{{ task.text }}</td>
        </tr>
      </ng-container>

    </tbody>
  </table>
</div>

<!-- Empty State -->
<div class="text-center mt-3" *ngIf="tasks.length === 0">
  <p class="alert alert-info">No tasks available. Please add some tasks!</p>
</div>
